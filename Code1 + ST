campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 9,
        "fields": {
            "year": 2000,
            "summary": "<p>Moderates reel as Ron Paul and Paul Wellstone have been crowned as their respective parties nominee. As America enters a new decade, the voters must not choose between progress and tradition, but what type of progress they would like.</p><p><ul><li>Paul's nomination has emboldened the libertarian movement, and wishes to decrease government authority and push for massive tax cuts.</li><li>Wellstone, a leading voice in the progressive movement, hopes to push not just his country left, but his party.</li></p>",
            "image_url": "https://www.jetsimon.com/public/static/images/2000-election-photo.jpg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://www.jetsimon.com/public/static/images/rove-brazile.jpg",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">The Florida Recount / 2000 Election</h4><a href=\"http://www.amazon.com/exec/obidos/ASIN/B000RH0DVM/amhius20-20\" target=”_blank”>Jeffrey Toobin - Too Close to Call: The Thirty-Six-Day Battle to Decide the 2000 Election</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B00EMLDHFI/amhius20-20\" target=”_blank”>Andrew E. Busch & James W. Ceaser - The Perfect Tie: The True Story of the 2000 Presidential Election</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/032110028X/amhius20-20\" target=”_blank”>Larry Sabato - Overtime! The Election 2000 Thriller</a><h4>Books by the Candidates</h4><a href=\"http://www.amazon.com/exec/obidos/ASIN/B000C4SV2I/amhius20-20\" target=”_blank”>George W. Bush - A Charge to Keep: My Journey to the White House</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/0452269350/amhius20-20\" target=”_blank”>Al Gore - Earth in the Balance</a></br><a href=\"http://www.amazon.com/exec/obidos/ASIN/B003YFIYWY/amhius20-20\" target=”_blank”>The Ralph Nader Reader</a><h4>Links</h4><a href=\"http://www.digitalhistory.uh.edu/disp_textbook.cfm?smtID=2&psid=3377\" target=”_blank”>Digital History - The Disputed Election of 2000</a></br><a href=\"http://www.pbs.org/wnet/supremecourt/future/landmark_bush.html\" target=”_blank”><em>Bush v. Gore</em></a></br><a href=\"http://www.vanityfair.com/news/2004/10/florida-election-2000\" target=”_blank”>The Path to Florida</a></br><a href=\"http://www.historyplace.com/speeches/gore-concedes.htm\" target=”_blank”>Al Gore Concedes the 2000 Election</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "2000"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 50000,
        "fields": {
            "first_name": "Paul",
            "last_name": "Wellstone",
            "election": 9,
            "party": "Democratic",
            "state": "Minnesota",
            "priority": 1,
            "description": "<b><i>\"Sometimes, the only realists are the dreamers.\"</b></i>\n\n<br><br>Senator Paul Wellstone has never been one to conform, but also never one to surrender. As a two term senator, he's been a feirce advocate for labor rights, social justice, and healthcare access, making him a progressive voice in an increasingly centrist party. Despite pundits saying he wouldn't be able to defeat Gore, he's shown that Democrats are fed up with moderates hijacking the party of Roosevelt.<br><br>Wellstone's campaign is a mirror of what he's been saying as Senator and in the primaries: Universal healthcare, raising the minimum wage, protecting our workers, and raising taxes on the wealthy. However, the question of how accepting Americans are of this wing of the Democratic party is yet to be seen, and such a big pivot from the Clinton years is sure to turn off his diehard supporters and moderates. If Wellstone wants to pull off a win, he'll need to find a way to expand his coalition without disregarding his most diehard supporters.",
            "color_hex": "#4f527b",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/7kzc9y3.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50001,
        "fields": {
            "first_name": "Ron",
            "last_name": "Paul",
            "election": 9,
            "party": "Republican",
            "state": "Texas",
            "priority": 1,
            "description": "It is I, RONALD PAUL.",
            "color_hex": "#995673",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/PD96ZFZ.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50002,
        "fields": {
            "first_name": "Jeanne",
            "last_name": "Shaheen",
            "election": 9,
            "party": "Democratic",
            "state": "New Hampshire",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#4f527b",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/B0TwERd.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "Skibidi",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50003,
        "fields": {
            "first_name": "Bill",
            "last_name": "Bradley",
            "election": 9,
            "party": "Democratic",
            "state": "New Jersey",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#4f527b",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/zICizFL.jpeg",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "I got the Knicks 2 rings fr\n\n<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50004,
        "fields": {
            "first_name": "Pete",
            "last_name": "Wilson",
            "election": 9,
            "party": "Republican",
            "state": "California",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#995673",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/6lvKSDI.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "I wanted to be president in '96",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 50005,
        "fields": {
            "first_name": "Bob",
            "last_name": "Barr",
            "election": 9,
            "party": "Republican",
            "state": "Georgia",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#995673",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/N8EsZbJ.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "I got a mustache",
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 126035,
        "fields": {
            "candidate": 50000,
            "running_mate": 50002
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 154606,
        "fields": {
            "candidate": 50001,
            "running_mate": 50005
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 101675,
        "fields": {
            "candidate": 50001,
            "running_mate": 50004
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 150720,
        "fields": {
            "candidate": 50000,
            "running_mate": 50003
        }
    }
]

campaignTrail_temp.credits = "AuH₂O"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 9,
        "candidates": [
            50000,
            50001
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 9,
        "candidates": [
            50000,
            50001
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 9,
        "year": 2000,
        "is_premium": 0,
        "display_year": "2000"
    }
]

jet_data = {
    "headerColor": "#b1485d",
    "windowColor": "#a6a6a6",
    "containerColor": "#6869a6",
    "innerWindowColor": "#E8FBFF",
    "bannerImageUrl": "https://i.imgur.com/8G3laAT.png",
    "backgroundImageUrl": "https://i.pinimg.com/originals/77/72/f5/7772f519407c0900fbeece5eb3ef6164.jpg",
    "endingTextColor": "#000000",
    "customQuote": ""
}

//#startcode



nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#b1485d";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#a6a6a6";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#6869a6";

document.getElementById("header").src = "https://i.imgur.com/8G3laAT.png";

document.body.background = "https://i.pinimg.com/originals/77/72/f5/7772f519407c0900fbeece5eb3ef6164.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#E8FBFF!important;}</style>";

quotes = ["”Politics is not about power.” - Paul Wellstone", "Dedicated to Paul Wellstone", "”Politics is not about power.” - Paul Wellstone", "”I'd like to think of myself as the flavor of the decade.” - Ron Paul", "”I'd like to think of myself as the flavor of the decade.” - Ron Paul", "”I’m mad as hell and not gonna take it anymore!”", "Dedicated to Paul Wellstone"]
            customquote = quotes[Math.floor((Math.random() * quotes.length))]

            corrr = `\n<h2>The New Campaign Trail</h2><font id='wittyquote' size='3.5' color='#ffffff'><em>` + customquote + `</em></font>`

//#endcode
// Soundtrack

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "A New Left!",
    tracklist: [
      {
        "name": "Butthole Surfers - Dracula From Houston",
        "url": "https://od.lk/s/OV8yMzEzMDY3NThf/spotifydown.com_-_Dracula_From_Houston.mp3"
      },
      {
        "name": "Rage Against the Machine - Testify",
        "url": "https://od.lk/s/OV8yMzEzMDY4NzBf/spotifydown.com%20-%20Testify.mp3"
      },
     {
        "name": "Green Day - Minority",
        "url": "https://od.lk/s/OV8yMzEzMDcwNjFf/spotifydown.com%20-%20Minority.mp3"
      },
      {
        "name": "The Offspring - Why Don’t you Get a Job",
        "url": "https://od.lk/s/OV8yMzEzMDcwNjdf/spotifydown.com%20-%20Why%20Don%27t%20You%20Get%20A%20Job.mp3"
  }
    ]
  },
  1: {
    name: "RƎVOLUTION",
    tracklist: [
      {
        "name": "M.C. Hammer - U Can't Touch This",
        "url": "https://od.lk/s/OThfMzk2Nzg5ODdf/cant%20touch%20this.mp3"
      },
      {
        "name": "Spice Girls - Wannabe",
        "url": "https://od.lk/s/OThfMzk2Nzg5OTFf/wannabe.mp3"
      },
     {
        "name": "Coolio - Gangsta's Paradise",
        "url": "https://od.lk/s/OThfMzk2Nzg5OTBf/gangstah%20para.mp3"
      },
      {
        "name": "Nirvana - Smells Like Teen Spirit",
        "url": "https://od.lk/s/OThfMzk2Nzg5OTJf/smeells%20like%20spirit.mp3"
      },
      {
        "name": "Radiohead - Creep",
        "url": "https://od.lk/s/OThfMzk2Nzg5ODlf/creep.mp3"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()


function modifyForm() {
  try {
    const form = document.querySelector('form[name="game_type_selection"]');
    const select = form.querySelector('select[name="game_type_id"]');
  
    // change option value
    const option = select.querySelector('option[value="1"]');
    option.textContent = 'Default (Proportional)';

    // Remove second option
    select.querySelector('option[value="1"]').remove();
  
    // change h3 text
    const h3 = form.querySelector('h3');
    h3.textContent = 'How would you like the seats to be allocated?';
  } catch {}
}

//#endcode
